{% from "macros.html" import top %}
{% from "macros.html" import usual_head %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    {{ usual_head() }}
    <title>Fetch from API</title>
</head>

<body>
    {{ top() }}
    <h1>Fetch from API</h1>
    <p>Enter the required information to update your data via the respective APIs.</p>
    <p>
        For PSN key, you must first log in to us.playstation.com on this browser, and
        then visit this url:
    </p>
    <p>
        <a href="https://ca.account.sony.com/api/v1/ssocookie" target="_blank" rel="noopener noreferrer">
            https://ca.account.sony.com/api/v1/ssocookie
        </a>
    </p>
    <p>
        After having done that, copy the string inside the quotes after npsso, as
        below, where the string is the series of X's:
    </p>
    <p>{"npsso":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"}</p>
    <p>
        Paste the XXX... value in the box, WITHOUT quotes.
    </p>
    <form name="psn-api" action="/fetch" method="post">
        <table>
            <tr>
                <td><label for="psn_key">PSN key:</label></td>
                <td>
                    <input type="text" id="psn_key" name="psnkey">
                </td>
            </tr>
        </table>
        <input type="submit" value="Submit">
    </form>
    <p>
        {{ status }}
    </p>
</body>

</html>